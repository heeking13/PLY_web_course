function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _createSuper(e){return function(){var t,n=_getPrototypeOf(e);if(_isNativeReflectConstruct()){var o=_getPrototypeOf(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return _possibleConstructorReturn(this,t)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"8XG9":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n("LRne"),i=n("fXoL"),r=n("bB31"),c=function(){var e=function(){function e(t){var n=this;_classCallCheck(this,e),this.messageService=t,this.createHandleError=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"operation",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n.handleError(e,t,o)}}}return _createClass(e,[{key:"handleError",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"operation",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r){console.log(r);var c=r.error instanceof ErrorEvent?r.error.message:"Serve feedback".concat(r.status,",feedback information").concat(r.error);return e.messageService.err("".concat(t,":").concat(n,":Content:").concat(c)),Object(o.a)(i)}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.ec(r.a))},e.\u0275prov=i.Qb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},OqvA:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n("fXoL"),i=function(){var e=function e(){_classCallCheck(this,e),this.url="http://127.0.0.1:8081"};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Qb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},Xoj1:function(e,t,n){"use strict";n.r(t);var o,i=n("ofXK"),r=n("0nng"),c=n("tyNb"),s=n("nYmY"),a=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),this.questions=[],this.id=t.id||"",this.questionName=t.questionName||""},u=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var o;return _classCallCheck(this,n),(o=t.call(this,e)).options=e,o.controlType=0,o.questions=e.questions||[],o}return n}(a),l=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var o;return _classCallCheck(this,n),(o=t.call(this,e)).options=e,o.controlType=1,o.questions=e.questions||[],o}return n}(a),f=n("fXoL"),p=n("94Cw"),h=n("fFZa"),b=n("B+r4"),v=n("q0Us"),m=n("3Pt+"),g=((o=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"toFormGroup",value:function(e){var t={};return e.forEach((function(e){t[e.id]=new m.d(0)})),new m.g(t)}}]),e}()).\u0275fac=function(e){return new(e||o)},o.\u0275prov=f.Qb({token:o,factory:o.\u0275fac}),o),d=n("+Mbm"),y=n("7xZ/"),k=n("PScX"),C=n("OzZK");function _(e,t){if(1&e&&(f.ac(0,"li",4),f.ac(1,"label",5),f.Vb(2,"input",6),f.Mc(3),f.Zb(),f.Zb()),2&e){var n=t.$implicit,o=f.lc(2);f.Db(2),f.tc("formControlName",o.question.id)("value",n.value),f.Db(1),f.Oc(" ",n.key," ")}}function q(e,t){if(1&e&&(f.ac(0,"div"),f.ac(1,"ul"),f.Kc(2,_,4,3,"li",3),f.Zb(),f.Zb()),2&e){var n=f.lc();f.Db(2),f.tc("ngForOf",n.question.questions)}}function x(e,t){if(1&e){var n=f.bc();f.ac(0,"label",9),f.Mc(1),f.ac(2,"input",10,11),f.ic("click",(function(){f.Cc(n);var e=f.Bc(3),t=f.lc(2);return t.setCheckBoxValue(e,t.question.id)})),f.Zb(),f.Zb()}if(2&e){var o=t.$implicit;f.Db(1),f.Oc(" ",o.key," "),f.Db(1),f.tc("value",o.value)}}function O(e,t){if(1&e&&(f.ac(0,"div"),f.Vb(1,"input",7),f.Kc(2,x,4,2,"label",8),f.Zb()),2&e){var n=f.lc();f.Db(1),f.tc("formControlName",n.question.id)("hidden",!0),f.Db(1),f.tc("ngForOf",n.question.questions)}}var w,P=((w=function(){function e(){_classCallCheck(this,e),this.checkboxArr=[]}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"setCheckBoxValue",value:function(e,t){this.checkboxArr.includes(+e.value)?this.checkboxArr.splice(this.checkboxArr.findIndex((function(t){return+t==+e.value})),1):this.checkboxArr.push(+e.value),this.form.patchValue(_defineProperty({},t,this.checkboxArr))}}]),e}()).\u0275fac=function(e){return new(e||w)},w.\u0275cmp=f.Ob({type:w,selectors:[["app-exam-form-question"]],inputs:{question:"question",form:"form"},decls:6,vars:5,consts:[[2,"margin-top","20px",3,"formGroup"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","li-radio",4,"ngFor","ngForOf"],[1,"li-radio"],[1,"question-radio"],["nzRequired","","type","radio",3,"formControlName","value"],["type","text",3,"formControlName","hidden"],["class","radio-inline question-checkbox",4,"ngFor","ngForOf"],[1,"radio-inline","question-checkbox"],["type","checkbox",3,"value","click"],["oneCheckBox",""]],template:function(e,t){1&e&&(f.ac(0,"div",0),f.ac(1,"label"),f.Mc(2),f.Zb(),f.ac(3,"div",1),f.Kc(4,q,3,1,"div",2),f.Kc(5,O,3,3,"div",2),f.Zb(),f.Zb()),2&e&&(f.tc("formGroup",t.form),f.Db(2),f.Nc(t.question.questionName),f.Db(1),f.tc("ngSwitch",t.question.controlType),f.Db(1),f.tc("ngSwitchCase",0),f.Db(1),f.tc("ngSwitchCase",1))},directives:[m.m,m.h,i.n,i.o,i.k,m.o,m.b,m.l,m.f],styles:["ul[_ngcontent-%COMP%]{margin:0;padding:0}label.question-checkbox[_ngcontent-%COMP%], label.question-radio[_ngcontent-%COMP%]{cursor:pointer;padding:10px}label.question-checkbox[_ngcontent-%COMP%] > input[_ngcontent-%COMP%], label.question-radio[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{margin-top:10px;margin-left:10px}.li-radio[_ngcontent-%COMP%]{list-style:none;margin:10px 0;display:inline-block}"]}),w);function S(e,t){if(1&e&&(f.ac(0,"div"),f.Vb(1,"app-exam-form-question",4),f.Zb()),2&e){var n=t.$implicit,o=f.lc(2);f.Db(1),f.tc("question",n)("form",o.form)}}function N(e,t){if(1&e){var n=f.bc();f.ac(0,"form",1),f.ic("ngSubmit",(function(){return f.Cc(n),f.lc().onSubmit()})),f.Kc(1,S,2,2,"div",2),f.ac(2,"div"),f.ac(3,"button",3),f.Mc(4,"Submit"),f.Zb(),f.Zb(),f.Zb()}if(2&e){var o=f.lc();f.tc("formGroup",o.form),f.Db(1),f.tc("ngForOf",o.questionList)}}var D,z,L,M=((D=function(){function e(t,n,o,i,r){_classCallCheck(this,e),this.router=t,this.qcs=n,this.usc=o,this.scoreService=i,this.nzmsg=r}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(e){console.log(this.questionList),this.questionList&&(this.form=this.qcs.toFormGroup(this.questionList),console.log(this.form))}},{key:"onSubmit",value:function(){console.log(this.form.value),Object.values(this.form.value).every((function(e){return 0!==e}))?this.score():this.nzmsg.warning("You have quesstion that do not answer!")}},{key:"score",value:function(){var e=this;this.questionData=this.getQuestionData(),this.scoreService.mark(this.questionData).subscribe((function(t){console.log(t),0===t.code?(e.scoreService.score=t.score,e.router.navigate(["examMessage"])):e.nzmsg.error("something wrong, please try again\uff01")}))}},{key:"getQuestionData",value:function(){return{examName:this.examName,userName:this.usc.user?this.usc.user.username:"tourist",questions:this.form.value,date:(new Date).getTime()}}}]),e}()).\u0275fac=function(e){return new(e||D)(f.Ub(c.d),f.Ub(g),f.Ub(d.a),f.Ub(y.a),f.Ub(k.e))},D.\u0275cmp=f.Ob({type:D,selectors:[["app-exam-form"]],inputs:{questionList:"questionList",examName:"examName"},features:[f.Cb([g]),f.Bb],decls:1,vars:1,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[4,"ngFor","ngForOf"],["tyep","submit","nz-button","","nzType","primary",2,"margin-top","20px"],[3,"question","form"]],template:function(e,t){1&e&&f.Kc(0,N,5,2,"form",0),2&e&&f.tc("ngIf",t.form)},directives:[i.l,m.r,m.m,m.h,i.k,C.a,P],styles:[""]}),D),Z=[{path:"",component:(z=function(){function e(t,n,o){_classCallCheck(this,e),this.courseService=t,this.examService=n,this.questionService=o,this.nzOptions=null,this.values=null,this.examTitle="Online Exam"}return _createClass(e,[{key:"ngOnInit",value:function(){this.getcourseList()}},{key:"getcourseList",value:function(){var e=this;this.courseService.getcourseList().subscribe((function(t){console.log(t.userInfo),e.nzOptions=t.userInfo.map((function(e){return e.populateExam.length>0?{value:e._id,label:e.courseName,children:e.populateExam.map((function(e){return{value:e._id,label:e.examName,isLeaf:!0}}))}:{value:e._id,label:e.courseName,disabled:!0}}))}))}},{key:"getOneExam",value:function(e){var t=this;this.examService.getOneExam(e).subscribe((function(e){t.examTitle=e.examName,t.selectExam=e,t.getQuestionList(t.selectExam._id)}))}},{key:"onChanges",value:function(e){this.getOneExam(e[1])}},{key:"getQuestionList",value:function(e){var t=this;console.log(e),this.questionService.getQuestionList(e).subscribe((function(e){console.log(e),t.questionList=e.userInfo.map((function(e){return 0===e.type?new u({id:e._id,questionName:e.questionName,questions:[{key:e.question0,value:3},{key:e.question1,value:5},{key:e.question2,value:11},{key:e.question3,value:21}].filter((function(e){return e.key}))}):new l({id:e._id,questionName:e.questionName,questions:[{key:e.question0,value:3},{key:e.question1,value:5},{key:e.question2,value:11},{key:e.question3,value:21}].filter((function(e){return e.key}))})}))}))}}]),e}(),z.\u0275fac=function(e){return new(e||z)(f.Ub(s.a),f.Ub(p.a),f.Ub(h.a))},z.\u0275cmp=f.Ob({type:z,selectors:[["app-exam"]],features:[f.Cb([s.a])],decls:9,vars:5,consts:[[1,"main"],["nz-row",""],["nz-col","","nzSpan","6"],["nzPlaceHolder","Please select",3,"nzOptions","ngModel","ngModelChange"],["nz-col","","nzSpan","16"],[1,"examTitle"],[3,"questionList","examName"],["nz-col","","nzSpan","2"]],template:function(e,t){1&e&&(f.ac(0,"div",0),f.ac(1,"div",1),f.ac(2,"div",2),f.ac(3,"nz-cascader",3),f.ic("ngModelChange",(function(e){return t.values=e}))("ngModelChange",(function(e){return t.onChanges(e)})),f.Zb(),f.Zb(),f.ac(4,"div",4),f.ac(5,"h1",5),f.Mc(6),f.Zb(),f.Vb(7,"app-exam-form",6),f.Zb(),f.Vb(8,"div",7),f.Zb(),f.Zb()),2&e&&(f.Db(3),f.tc("nzOptions",t.nzOptions)("ngModel",t.values),f.Db(3),f.Nc(t.examTitle),f.Db(1),f.tc("questionList",t.questionList)("examName",t.examTitle))},directives:[b.c,b.a,v.a,m.l,m.n,M],styles:[".main[_ngcontent-%COMP%]{background:#fff;padding:50px;box-shadow:0 1px 2px #bbb}.examTitle[_ngcontent-%COMP%]{padding-left:30px;letter-spacing:2px}.change-options[_ngcontent-%COMP%]{display:inline-block;font-size:12px;margin-top:8px}"]}),z)}],E=((L=function e(){_classCallCheck(this,e)}).\u0275mod=f.Sb({type:L}),L.\u0275inj=f.Rb({factory:function(e){return new(e||L)},imports:[[c.g.forChild(Z)],c.g]}),L);n.d(t,"ExamModule",(function(){return j}));var T,j=((T=function e(){_classCallCheck(this,e)}).\u0275mod=f.Sb({type:T}),T.\u0275inj=f.Rb({factory:function(e){return new(e||T)},imports:[[i.c,E,r.a,m.i,m.p]]}),T)},bB31:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n("tk/3"),i=n("fXoL"),r=n("OqvA"),c=function(){var e=function(){function e(t,n){_classCallCheck(this,e),this.http=t,this.config=n,this.token="pass",this.httpOptions={headers:new o.e({"Content-Type":"application/json","x-access-token":this.token})}}return _createClass(e,[{key:"add",value:function(e){return this.http.post("".concat(this.config.url,"/log/message"),e,this.httpOptions)}},{key:"err",value:function(e){console.log(e)}},{key:"getOneDataLog",value:function(e){return this.http.post("".concat(this.config.url,"/log/getOneDataLog"),e,this.httpOptions)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.ec(o.b),i.ec(r.a))},e.\u0275prov=i.Qb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}]);