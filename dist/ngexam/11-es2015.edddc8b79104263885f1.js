(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"8XG9":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("LRne"),i=n("fXoL"),o=n("bB31");let s=(()=>{class e{constructor(e){this.messageService=e,this.createHandleError=(e="")=>(t="operation",n={})=>this.handleError(e,t,n)}handleError(e="",t="operation",n={}){return i=>{console.log(i);const o=i.error instanceof ErrorEvent?i.error.message:`Serve feedback${i.status},feedback information${i.error}`;return this.messageService.err(`${e}:${t}:Content:${o}`),Object(a.a)(n)}}}return e.\u0275fac=function(t){return new(t||e)(i.ec(o.a))},e.\u0275prov=i.Qb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},OqvA:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("fXoL");let i=(()=>{class e{constructor(){this.url="http://127.0.0.1:8081"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Qb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},S4wv:function(e,t,n){"use strict";n.r(t);var a=n("ofXK"),i=n("0nng"),o=n("tyNb"),s=n("3Pt+"),c=n("nYmY"),r=n("nPFy"),l=n("fXoL"),u=n("PScX"),m=n("dEAy"),b=n("94Cw"),d=n("OzZK"),z=n("rMZv"),h=n("ocnv"),g=n("PTRe"),f=n("zAKX"),p=n("5vDB"),x=n("KupA"),C=n("SKKP"),S=n("FGh6");const M=["pass"],O=["fail"];function v(e,t){1&e&&(l.Yb(0),l.Vb(1,"nz-badge",43),l.Xb()),2&e&&(l.Db(1),l.tc("nzStatus","success")("nzText","PASS"))}function L(e,t){1&e&&(l.Yb(0),l.Vb(1,"nz-badge",43),l.Xb()),2&e&&(l.Db(1),l.tc("nzStatus","error")("nzText","NOT PASS"))}function Z(e,t){if(1&e){const e=l.bc();l.ac(0,"tr"),l.ac(1,"td"),l.Mc(2),l.Zb(),l.ac(3,"td"),l.Mc(4),l.Zb(),l.ac(5,"td"),l.Kc(6,v,2,2,"ng-container",41),l.Kc(7,L,2,2,"ng-container",41),l.Zb(),l.ac(8,"td"),l.Mc(9),l.mc(10,"formatTime"),l.Zb(),l.ac(11,"td"),l.ac(12,"span",42),l.ac(13,"a",35),l.ic("nzOnConfirm",(function(){l.Cc(e);const n=t.$implicit,a=l.lc().$implicit;return l.lc().deleteAllocate(a._id,n._id)})),l.Mc(14,"Delete "),l.Zb(),l.Zb(),l.Zb(),l.Zb()}if(2&e){const e=t.$implicit;l.Db(2),l.Nc(e.examName),l.Db(2),l.Nc(e.examInfo),l.Db(2),l.tc("ngIf",1==e.state),l.Db(1),l.tc("ngIf",0==e.state),l.Db(2),l.Nc(l.nc(10,5,e.date))}}function D(e,t){if(1&e){const e=l.bc();l.ac(0,"tr"),l.ac(1,"td",32),l.ic("nzExpandChange",(function(n){return l.Cc(e),t.$implicit.expand=n})),l.Zb(),l.ac(2,"td"),l.Mc(3),l.Zb(),l.ac(4,"td"),l.ac(5,"a",33),l.ic("click",(function(){l.Cc(e);const n=t.$implicit;return l.lc().showCourseInfo(n.courseInfo)})),l.Mc(6),l.mc(7,"formatLength"),l.Zb(),l.Zb(),l.ac(8,"td"),l.Mc(9),l.mc(10,"formatTime"),l.Zb(),l.ac(11,"td"),l.ac(12,"a",33),l.ic("click",(function(){l.Cc(e);const n=t.$implicit;return l.lc().showModal(n)})),l.Mc(13,"Edit"),l.Zb(),l.Vb(14,"nz-divider",34),l.ac(15,"a",35),l.ic("nzOnConfirm",(function(){l.Cc(e);const n=t.$implicit;return l.lc().deleteCourse(n._id)})),l.Mc(16,"Delete"),l.Zb(),l.Zb(),l.Zb(),l.ac(17,"tr",36),l.Vb(18,"td"),l.ac(19,"td",37),l.ac(20,"nz-table",38,39),l.ac(22,"thead"),l.ac(23,"tr"),l.ac(24,"th"),l.Mc(25,"Exam Name"),l.Zb(),l.ac(26,"th"),l.Mc(27,"Description"),l.Zb(),l.ac(28,"th"),l.Mc(29,"Status"),l.Zb(),l.ac(30,"th"),l.Mc(31,"Date"),l.Zb(),l.ac(32,"th"),l.Mc(33,"Action"),l.Zb(),l.Zb(),l.Zb(),l.ac(34,"tbody"),l.Kc(35,Z,15,7,"tr",40),l.Zb(),l.Zb(),l.Zb(),l.Zb()}if(2&e){const e=t.$implicit,n=l.Bc(21);l.Db(1),l.tc("nzExpand",e.expand),l.Db(2),l.Nc(e.courseName),l.Db(3),l.Nc(l.oc(7,8,e.courseInfo,5)),l.Db(3),l.Nc(l.nc(10,11,e.date)),l.Db(8),l.tc("nzExpand",e.expand),l.Db(3),l.tc("nzData",e.populateExam)("nzShowPagination",!1),l.Db(15),l.tc("ngForOf",n.data)}}function E(e,t){if(1&e&&l.Vb(0,"nz-option",44),2&e){const e=t.$implicit;l.tc("nzValue",e._id)("nzLabel",e.courseName)}}function V(e,t){if(1&e&&l.Vb(0,"nz-option",45),2&e){const e=t.$implicit;l.tc("nzLabel",e.examName)("nzValue",e._id)}}function F(e,t){1&e&&l.Mc(0),2&e&&l.Oc(" and ",t.$implicit.length," more selected ")}const k=[{path:"",component:(()=>{class e{constructor(e,t,n,a,i,o){this.fb=e,this.nzMessageService=t,this.courseService=n,this.examService=a,this.nzModalService=i,this.pageService=o,this.courseList=[],this.selectCourseList=[],this.listOfOption=[],this.isVisible=!1,this.isOkLoading=!1,this.isExamVisible=!1,this.isExamOkLoading=!1,this.allocateModalisVisible=!1,this.allocateModalisOkLoading=!1,this.tableLoading=!1}ngOnInit(){this.getcourseList(),this.getExamList(),this.getSelectCourseList(),this.createForm=this.fb.group({courseName:[null,[s.q.required]],courseInfo:[null]}),this.createExamForm=this.fb.group({examName:[null,[s.q.required]],examInfo:[null],state:[0]})}get courseName(){return this.createForm.get("courseName")}get courseInfo(){return this.createForm.get("courseInfo")}get examName(){return this.createExamForm.get("examName")}get examInfo(){return this.createExamForm.get("examInfo")}showCourseInfo(e){this.nzModalService.info({nzTitle:"Course Description",nzContent:`<p>${e}</p>`})}getcourseList(e=!1){this.tableLoading=!0,this.courseService.getcourseList({pageIndex:this.pageService.pageIndex,pageSize:this.pageService.pageSize}).subscribe(e=>{this.courseList=e.userInfo.map((e,t)=>(e.expand=!1,e)),this.tableLoading=!1,this.pageService.total=e.total,console.log(this.courseList)})}getSelectCourseList(){this.courseService.getcourseList().subscribe(e=>{this.selectCourseList=e.userInfo,this.selectCourseValue=this.selectCourseList[0]._id})}createCourse(){this.addCourse=this.getAddCourse(),this.courseService.createCourse(this.addCourse).subscribe(e=>{console.log(e),0===e.code?(this.isVisible=!1,this.isOkLoading=!1,this.createForm.reset(),this.getcourseList(),this.getSelectCourseList(),this.nzMessageService.success("Add new course")):(this.isOkLoading=!1,this.nzMessageService.error("Add new course failed"))})}getExamList(){this.examService.getExamList().subscribe(e=>{this.listOfOption=e.userInfo})}getAddCourse(){const e=this.createForm.value;return{courseName:e.courseName,courseInfo:e.courseInfo,date:(new Date).getTime()}}updateCourse(){Object.assign(this.selectCourse,this.getAddCourse()),this.courseService.updateCourse(this.selectCourse).subscribe(e=>{0===e.code?(this.isVisible=!1,this.isOkLoading=!1,this.selectCourse=null,this.createForm.reset(),this.getcourseList(),this.nzMessageService.success("Edit course sucessfully")):(this.isOkLoading=!1,this.nzMessageService.error("Edit course failed"))})}deleteCourse(e){this.courseService.deleteCourse(e).subscribe(e=>{0===e.code?(this.pageService.pageIndex=1,this.getcourseList(),this.nzMessageService.success("Delete course sucessfully\uff01")):(this.isOkLoading=!1,this.nzMessageService.success("Delete course Failed\uff01"))})}deleteAllocate(e,t){console.log(e,t),this.courseService.deleteAllocate({courseId:e,examId:t}).subscribe(e=>{0===e.code?(this.getcourseList(),this.nzMessageService.success("delete allocate exam sucessfully\uff01")):(this.isOkLoading=!1,this.nzMessageService.error("delete allocate exam failed\uff01"))})}showModal(e){this.selectCourse=null,this.createForm.reset(),e?(this.courseModalTitle="Edit course",this.selectCourse=e,this.createForm.patchValue({courseName:this.selectCourse.courseName,courseInfo:this.selectCourse.courseInfo})):this.courseModalTitle="Add course",this.isVisible=!0,console.log(this.selectCourse)}submitForm(){this.isOkLoading=!0;for(const e in this.createForm.controls)this.createForm.controls[e].markAsDirty(),this.createForm.controls[e].updateValueAndValidity();this.selectCourse?this.updateCourse():this.createCourse()}handleCancel(){this.isVisible=!1}createExam(){this.addExam=this.getAddExam(),this.examService.createExam(this.addExam).subscribe(e=>{console.log(e),0===e.code?(this.isExamVisible=!1,this.isExamOkLoading=!1,this.createExamForm.reset(),this.getcourseList(),this.getExamList(),this.nzMessageService.success("Add new exam success")):(this.isExamOkLoading=!1,this.nzMessageService.error("Add new exam failed"))})}getAddExam(){const e=this.createExamForm.value;return{examName:e.examName,examInfo:e.examInfo,state:Number(e.state),date:(new Date).getTime()}}showExamModal(){this.isExamVisible=!0,this.fail.nativeElement.checked=!0}submitExamForm(){for(const e in this.createExamForm.controls)this.createExamForm.controls[e].markAsDirty(),this.createExamForm.controls[e].updateValueAndValidity();this.createExam()}handleExamCancel(){this.isExamVisible=!1,this.createExamForm.reset()}allocateShowModal(){this.allocateModalisVisible=!0}allocateHandleOk(){console.log(this.selectCourseValue),console.log(this.listOfSelectedValue),this.courseService.allocateExam({course_id:this.selectCourseValue,examList:this.listOfSelectedValue}).subscribe(e=>{console.log(e),0===e.code?(this.getcourseList(),this.nzMessageService.success("Distribute exam success")):this.nzMessageService.error("Distribute exam failed"),this.allocateModalisVisible=!1})}allocateCancel(){this.allocateModalisVisible=!1}}return e.\u0275fac=function(t){return new(t||e)(l.Ub(s.c),l.Ub(u.e),l.Ub(c.a),l.Ub(b.a),l.Ub(m.c),l.Ub(r.a))},e.\u0275cmp=l.Ob({type:e,selectors:[["app-course"]],viewQuery:function(e,t){var n;1&e&&(l.Rc(M,!0),l.Rc(O,!0)),2&e&&(l.Ac(n=l.jc())&&(t.pass=n.first),l.Ac(n=l.jc())&&(t.fail=n.first))},features:[l.Cb([c.a,r.a])],decls:74,vars:60,consts:[[1,"table-operations"],["nz-button","",3,"click"],["nzBordered","",3,"nzData","nzFrontPagination","nzLoading","nzPageIndex","nzPageSize","nzTotal","nzPageIndexChange","nzPageSizeChange"],["nestedTable",""],["nzShowExpand",""],["ngFor","",3,"ngForOf"],[3,"nzVisible","nzTitle","nzFooter","nzOkLoading","nzVisibleChange","nzOnCancel"],["nz-form","",3,"formGroup","ngSubmit"],["nzFor","courseName",3,"nzSm","nzXs"],[3,"nzSm","nzXs"],["nz-input","","formControlName","courseName","id","courseName","placeholder","Please input course name"],["nzFor","courseInfo",3,"nzSm","nzXs"],["formControlName","courseInfo","nz-input","","rows","4","placeholder","Optional"],[3,"nzSm","nzXs","nzOffset"],["nz-button","","nzType","primary","nzBlock","true",3,"nzLoading","disabled"],["nzTitle","Add new exam",3,"nzVisible","nzFooter","nzOkLoading","nzVisibleChange","nzOnCancel"],["nzFor","examName",3,"nzSm","nzXs"],["nz-input","","formControlName","examName","id","examName","placeholder","Please input exam name"],["nzFor","b",3,"nzSm","nzXs"],["type","radio","formControlName","state","id","b","value","1"],["pass",""],["nzFor","g",3,"nzSm","nzXs"],["type","radio","formControlName","state","id","g","value","0"],["fail",""],["nzFor","examInfo",3,"nzSm","nzXs"],["formControlName","examInfo","nz-input","","rows","4","placeholder","Optional"],["nzTitle","Distribute exam",3,"nzVisible","nzOkLoading","nzVisibleChange","nzOnOk","nzOnCancel"],["nzAllowClear","","nzPlaceHolder","Choose",3,"ngModel","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzMode","multiple","nzPlaceHolder","Please select",2,"width","50%","margin-left","20px",3,"nzMaxTagCount","nzMaxTagPlaceholder","ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["tagPlaceHolder",""],["nzShowExpand","",3,"nzExpand","nzExpandChange"],[3,"click"],["nzType","vertical"],["nz-popconfirm","","nzPopconfirmTitle","Sure to delete?",3,"nzOnConfirm"],[3,"nzExpand"],["colspan","7"],["nzSize","middle",3,"nzData","nzShowPagination"],["innerTable",""],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"table-operation"],[3,"nzStatus","nzText"],[3,"nzValue","nzLabel"],[3,"nzLabel","nzValue"]],template:function(e,t){if(1&e&&(l.ac(0,"div",0),l.ac(1,"button",1),l.ic("click",(function(){return t.showModal()})),l.Mc(2,"New Course"),l.Zb(),l.ac(3,"button",1),l.ic("click",(function(){return t.showExamModal()})),l.Mc(4,"New Exam"),l.Zb(),l.ac(5,"button",1),l.ic("click",(function(){return t.allocateShowModal()})),l.Mc(6,"Distribute Exam"),l.Zb(),l.Zb(),l.ac(7,"nz-table",2,3),l.ic("nzPageIndexChange",(function(e){return t.pageService.pageIndex=e}))("nzPageSizeChange",(function(e){return t.pageService.pageSize=e}))("nzPageIndexChange",(function(){return t.getcourseList()}))("nzPageSizeChange",(function(){return t.getcourseList(!0)})),l.ac(9,"thead"),l.ac(10,"tr"),l.Vb(11,"th",4),l.ac(12,"th"),l.Mc(13,"Course Name"),l.Zb(),l.ac(14,"th"),l.Mc(15,"Description"),l.Zb(),l.ac(16,"th"),l.Mc(17,"Date"),l.Zb(),l.ac(18,"th"),l.Mc(19,"Operation"),l.Zb(),l.Zb(),l.Zb(),l.ac(20,"tbody"),l.Kc(21,D,36,13,"ng-template",5),l.Zb(),l.Zb(),l.ac(22,"nz-modal",6),l.ic("nzVisibleChange",(function(e){return t.isVisible=e}))("nzOnCancel",(function(){return t.handleCancel()})),l.ac(23,"form",7),l.ic("ngSubmit",(function(){return t.submitForm()})),l.ac(24,"nz-form-item"),l.ac(25,"nz-form-label",8),l.Mc(26,"Course Name"),l.Zb(),l.ac(27,"nz-form-control",9),l.Vb(28,"input",10),l.Zb(),l.Zb(),l.ac(29,"nz-form-item"),l.ac(30,"nz-form-label",11),l.Mc(31,"Description"),l.Zb(),l.ac(32,"nz-form-control",9),l.Vb(33,"textarea",12),l.Zb(),l.Zb(),l.ac(34,"nz-form-item"),l.ac(35,"nz-form-control",13),l.ac(36,"button",14),l.Mc(37,"Confirm"),l.Zb(),l.Zb(),l.Zb(),l.Zb(),l.Zb(),l.ac(38,"nz-modal",15),l.ic("nzVisibleChange",(function(e){return t.isExamVisible=e}))("nzOnCancel",(function(){return t.handleExamCancel()})),l.ac(39,"form",7),l.ic("ngSubmit",(function(){return t.submitExamForm()})),l.ac(40,"nz-form-item"),l.ac(41,"nz-form-label",16),l.Mc(42,"Exam Name"),l.Zb(),l.ac(43,"nz-form-control",9),l.Vb(44,"input",17),l.Zb(),l.Zb(),l.ac(45,"nz-form-item"),l.ac(46,"nz-form-label",9),l.Mc(47,"Review Status"),l.Zb(),l.ac(48,"nz-form-label",18),l.Mc(49,"Pass Review"),l.Zb(),l.ac(50,"nz-form-control",9),l.Vb(51,"input",19,20),l.Zb(),l.ac(53,"nz-form-label",21),l.Mc(54,"No Review"),l.Zb(),l.ac(55,"nz-form-control",9),l.Vb(56,"input",22,23),l.Zb(),l.Zb(),l.ac(58,"nz-form-item"),l.ac(59,"nz-form-label",24),l.Mc(60,"Description"),l.Zb(),l.ac(61,"nz-form-control",9),l.Vb(62,"textarea",25),l.Zb(),l.Zb(),l.ac(63,"nz-form-item"),l.ac(64,"nz-form-control",13),l.ac(65,"button",14),l.Mc(66,"Confirm"),l.Zb(),l.Zb(),l.Zb(),l.Zb(),l.Zb(),l.ac(67,"nz-modal",26),l.ic("nzVisibleChange",(function(e){return t.allocateModalisVisible=e}))("nzOnOk",(function(){return t.allocateHandleOk()}))("nzOnCancel",(function(){return t.allocateCancel()})),l.ac(68,"nz-select",27),l.ic("ngModelChange",(function(e){return t.selectCourseValue=e})),l.Kc(69,E,1,2,"nz-option",28),l.Zb(),l.ac(70,"nz-select",29),l.ic("ngModelChange",(function(e){return t.listOfSelectedValue=e})),l.Kc(71,V,1,2,"nz-option",30),l.Zb(),l.Kc(72,F,1,1,"ng-template",null,31,l.Lc),l.Zb()),2&e){const e=l.Bc(8),n=l.Bc(73);l.Db(7),l.tc("nzData",t.courseList)("nzFrontPagination",!1)("nzLoading",t.tableLoading)("nzPageIndex",t.pageService.pageIndex)("nzPageSize",t.pageService.pageSize)("nzTotal",t.pageService.total),l.Db(14),l.tc("ngForOf",e.data),l.Db(1),l.tc("nzVisible",t.isVisible)("nzTitle",t.courseModalTitle)("nzFooter",null)("nzOkLoading",t.isOkLoading),l.Db(1),l.tc("formGroup",t.createForm),l.Db(2),l.tc("nzSm",6)("nzXs",24),l.Db(2),l.tc("nzSm",14)("nzXs",24),l.Db(3),l.tc("nzSm",6)("nzXs",24),l.Db(2),l.tc("nzSm",14)("nzXs",24),l.Db(3),l.tc("nzSm",14)("nzXs",24)("nzOffset",6),l.Db(1),l.tc("nzLoading",t.isOkLoading)("disabled",!t.createForm.valid),l.Db(2),l.tc("nzVisible",t.isExamVisible)("nzFooter",null)("nzOkLoading",t.isExamOkLoading),l.Db(1),l.tc("formGroup",t.createExamForm),l.Db(2),l.tc("nzSm",6)("nzXs",24),l.Db(2),l.tc("nzSm",14)("nzXs",24),l.Db(3),l.tc("nzSm",6)("nzXs",6),l.Db(2),l.tc("nzSm",4)("nzXs",4),l.Db(2),l.tc("nzSm",2)("nzXs",2),l.Db(3),l.tc("nzSm",4)("nzXs",4),l.Db(2),l.tc("nzSm",2)("nzXs",2),l.Db(4),l.tc("nzSm",6)("nzXs",24),l.Db(2),l.tc("nzSm",14)("nzXs",24),l.Db(3),l.tc("nzSm",14)("nzXs",24)("nzOffset",6),l.Db(1),l.tc("nzLoading",t.isExamOkLoading)("disabled",!t.createExamForm.valid),l.Db(2),l.tc("nzVisible",t.allocateModalisVisible)("nzOkLoading",t.allocateModalisOkLoading),l.Db(1),l.tc("ngModel",t.selectCourseValue),l.Db(1),l.tc("ngForOf",t.selectCourseList),l.Db(1),l.tc("nzMaxTagCount",3)("nzMaxTagPlaceholder",n)("ngModel",t.listOfSelectedValue),l.Db(1),l.tc("ngForOf",t.listOfOption)}},directives:[d.a,z.a,z.f,z.g,z.e,z.c,a.k,m.a,s.r,s.m,h.b,s.h,h.d,h.e,h.a,s.b,g.b,s.l,s.f,s.o,f.b,s.n,z.d,p.a,x.a,a.l,C.a,f.a],pipes:[S.a,S.b],styles:[".table-operations[_ngcontent-%COMP%]{margin-bottom:16px}.table-operations[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:8px}[nz-form][_ngcontent-%COMP%]{max-width:600px}.phone-select[_ngcontent-%COMP%]{width:70px}.register-are[_ngcontent-%COMP%]{margin-bottom:8px}nz-select[_ngcontent-%COMP%]{margin:0 8px 10px 0;width:120px}"]}),e})(),canActivate:[n("UeAQ").a]}];let w=(()=>{class e{}return e.\u0275mod=l.Sb({type:e}),e.\u0275inj=l.Rb({factory:function(t){return new(t||e)},imports:[[o.g.forChild(k)],o.g]}),e})();var N=n("Yonh");n.d(t,"CourseModule",(function(){return I}));let I=(()=>{class e{}return e.\u0275mod=l.Sb({type:e}),e.\u0275inj=l.Rb({factory:function(t){return new(t||e)},imports:[[a.c,w,i.a,s.i,s.p,N.a]]}),e})()},bB31:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("tk/3"),i=n("fXoL"),o=n("OqvA");let s=(()=>{class e{constructor(e,t){this.http=e,this.config=t,this.token="pass",this.httpOptions={headers:new a.e({"Content-Type":"application/json","x-access-token":this.token})}}add(e){return this.http.post(`${this.config.url}/log/message`,e,this.httpOptions)}err(e){console.log(e)}getOneDataLog(e){return this.http.post(`${this.config.url}/log/getOneDataLog`,e,this.httpOptions)}}return e.\u0275fac=function(t){return new(t||e)(i.ec(a.b),i.ec(o.a))},e.\u0275prov=i.Qb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);