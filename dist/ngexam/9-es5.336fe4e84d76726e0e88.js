function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"8XG9":function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var i=t("LRne"),o=t("fXoL"),a=t("bB31"),r=function(){var e=function(){function e(n){var t=this;_classCallCheck(this,e),this.messageService=n,this.createHandleError=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"operation",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.handleError(e,n,i)}}}return _createClass(e,[{key:"handleError",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"operation",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(a){console.log(a);var r=a.error instanceof ErrorEvent?a.error.message:"Serve feedback".concat(a.status,",feedback information").concat(a.error);return e.messageService.err("".concat(n,":").concat(t,":Content:").concat(r)),Object(i.a)(o)}}}]),e}();return e.\u0275fac=function(n){return new(n||e)(o.ec(a.a))},e.\u0275prov=o.Qb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},OqvA:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var i=t("fXoL"),o=function(){var e=function e(){_classCallCheck(this,e),this.url="http://127.0.0.1:8081"};return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=i.Qb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},bB31:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var i=t("tk/3"),o=t("fXoL"),a=t("OqvA"),r=function(){var e=function(){function e(n,t){_classCallCheck(this,e),this.http=n,this.config=t,this.token="pass",this.httpOptions={headers:new i.e({"Content-Type":"application/json","x-access-token":this.token})}}return _createClass(e,[{key:"add",value:function(e){return this.http.post("".concat(this.config.url,"/log/message"),e,this.httpOptions)}},{key:"err",value:function(e){console.log(e)}},{key:"getOneDataLog",value:function(e){return this.http.post("".concat(this.config.url,"/log/getOneDataLog"),e,this.httpOptions)}}]),e}();return e.\u0275fac=function(n){return new(n||e)(o.ec(i.b),o.ec(a.a))},e.\u0275prov=o.Qb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},qkzV:function(e,n,t){"use strict";t.r(n);var i,o,a=t("ofXK"),r=t("tyNb"),c=t("eIep"),s=t("3Pt+"),l=t("nPFy"),u=t("fXoL"),f=t("94Cw"),b=t("fFZa"),d=t("PScX"),m=t("dEAy"),h=t("yNE/"),p=t("OzZK"),z=t("rMZv"),g=t("ocnv"),v=t("PTRe"),C=t("zAKX"),y=t("FwiY"),w=t("FGh6"),O=((o=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e,n){var t;return function(e){e[e.A=3]="A",e[e.B=5]="B",e[e.C=11]="C",e[e.D=21]="D"}(t||(t={})),e.map((function(e){return t[e]})).join(",")}}]),e}()).\u0275fac=function(e){return new(e||o)},o.\u0275pipe=u.Tb({name:"answerPipe",type:o,pure:!0}),o),k=((i=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e,n){return["Single","Multiple"][e]}}]),e}()).\u0275fac=function(e){return new(e||i)},i.\u0275pipe=u.Tb({name:"questionType",type:i,pure:!0}),i);function M(e,n){if(1&e&&(u.ac(0,"nz-breadcrumb-item"),u.Mc(1),u.Zb()),2&e){var t=n.ngIf;u.Db(1),u.Oc(" ",t.examName," ")}}function Z(e,n){if(1&e){var t=u.bc();u.ac(0,"tr"),u.ac(1,"td"),u.Mc(2),u.Zb(),u.ac(3,"td"),u.ac(4,"a",27),u.ic("click",(function(){u.Cc(t);var e=n.$implicit;return u.lc().showInfo(e.questionInfo)})),u.Mc(5),u.mc(6,"formatLength"),u.Zb(),u.Zb(),u.ac(7,"td"),u.Mc(8),u.Zb(),u.ac(9,"td"),u.Mc(10),u.Zb(),u.ac(11,"td"),u.Mc(12),u.Zb(),u.ac(13,"td"),u.Mc(14),u.Zb(),u.ac(15,"td"),u.Mc(16),u.mc(17,"answerPipe"),u.Zb(),u.ac(18,"td"),u.Mc(19),u.mc(20,"questionType"),u.Zb(),u.ac(21,"td"),u.Mc(22),u.mc(23,"formatTime"),u.Zb(),u.Zb()}if(2&e){var i=n.$implicit;u.Db(2),u.Nc(i.questionName),u.Db(3),u.Nc(u.oc(6,9,i.questionInfo,5)),u.Db(3),u.Nc(i.question0),u.Db(2),u.Nc(i.question1),u.Db(2),u.Nc(i.question2),u.Db(2),u.Nc(i.question3),u.Db(2),u.Nc(u.nc(17,12,i.answer)),u.Db(3),u.Nc(u.nc(20,14,i.type)),u.Db(3),u.Nc(u.nc(23,16,i.date))}}function q(e,n){1&e&&(u.Yb(0),u.Mc(1," please input question Name! "),u.Xb())}function S(e,n){1&e&&(u.Yb(0),u.Mc(1," Question name format is incorrect "),u.Xb())}function F(e,n){if(1&e&&(u.ac(0,"nz-form-explain"),u.Kc(1,q,2,0,"ng-container",2),u.Kc(2,S,2,0,"ng-container",2),u.Zb()),2&e){var t=u.lc(),i=null,o=null==(i=t.validateForm.get("questionName"))?null:i.hasError("required"),a=null,r=null==(a=t.validateForm.get("password"))?null:a.hasError("lengthValid");u.Db(1),u.tc("ngIf",o),u.Db(1),u.tc("ngIf",r)}}function D(e,n){if(1&e&&(u.ac(0,"nz-form-label",32),u.Mc(1,"Choose "),u.Zb()),2&e){var t=u.lc().$implicit;u.tc("nzXs",24)("nzSm",4)("nzFor",t.controlInstance)}}function x(e,n){if(1&e){var t=u.bc();u.ac(0,"nz-form-item"),u.Kc(1,D,2,3,"nz-form-label",28),u.ac(2,"nz-form-control",29),u.Mc(3),u.Vb(4,"input",30),u.ac(5,"i",31),u.ic("click",(function(e){u.Cc(t);var i=n.$implicit,o=n.index,a=u.lc();return a.removeField(i,e,a.answerArr[o])})),u.Zb(),u.Zb(),u.Zb()}if(2&e){var i=n.$implicit,o=n.index,a=u.lc();u.Db(1),u.tc("ngIf",0==o),u.Db(1),u.tc("nzXs",24)("nzSm",20)("nzOffset",0==o?0:4),u.Db(1),u.Oc(" ",a.answerArr[o].label,""),u.Db(1),u.tc("placeholder","option-"+a.answerArr[o].label)("formControlName",i.controlInstance),u.Eb("id",i.id)}}function I(e,n){if(1&e&&u.Vb(0,"nz-option",33),2&e){var t=n.$implicit;u.tc("nzLabel",t.label)("nzValue",t.value)}}function A(e,n){if(1&e&&u.Mc(0),2&e){var t=u.lc();u.Oc(" and ",t.validateForm.value.answer.length," more selected ")}}var L,P,N=function(){return{span:24,offset:0}},X=function(){return{span:20,offset:4}},T=function(){return{span:14,offset:0}},V=function(){return{span:10,offset:4}},_=[{path:"",component:(L=function(){function e(n,t,i,o,a,r,c,s){_classCallCheck(this,e),this.router=n,this.route=t,this.examService=i,this.questionService=o,this.nzMessageService=a,this.fb=r,this.pageService=c,this.nzModalService=s,this.isVisible=!1,this.isOkLoading=!1,this.listOftype=[{text:"single",value:0},{text:"multiple",value:1}],this.listOfControl=[],this.answerArr=[],this.answerArrInit=[{label:"A",value:3},{label:"B",value:5},{label:"C",value:11},{label:"D",value:21}],this.removeArr=[],this.questionList=[],this.tableLoading=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.exam$=this.route.paramMap.pipe(Object(c.a)((function(n){return e.examId=n.get("id"),e.getQuestionList(),e.examService.getOneExam(n.get("id"))}))),this.validateForm=this.fb.group({questionName:[null,[s.q.required]],questionInfo:[null,[s.q.maxLength(300)]],answer:[null],type:[0]}),this.addField()}},{key:"getQuestionList",value:function(e){var n=this;this.tableLoading=!0,this.questionService.getQuestionList(this.examId,e,1).subscribe((function(e){n.tableLoading=!1,n.questionList=e.userInfo}))}},{key:"showModal",value:function(){this.isVisible=!0}},{key:"handleOk",value:function(){this.isVisible=!1}},{key:"handleCancel",value:function(){this.isVisible=!1}},{key:"addField",value:function(e){var n,t;e&&e.preventDefault(),this.removeArr.length>0?(n=this.removeArr[0],this.removeArr.splice(0,1)):n=this.listOfControl.length>0?this.listOfControl[this.listOfControl.length-1].id+1:0,t={id:n,controlInstance:"question".concat(n)};var i=this.listOfControl.push(t);console.log(this.listOfControl[this.listOfControl.length-1]),this.validateForm.addControl(this.listOfControl[i-1].controlInstance,new s.d(null,s.q.required)),this.answerArr.push(this.answerArrInit[n])}},{key:"removeField",value:function(e,n,t){if(n.preventDefault(),this.listOfControl.length>1){var i=this.listOfControl.indexOf(e);this.listOfControl.splice(i,1),console.log(this.listOfControl),this.validateForm.removeControl(e.controlInstance),this.answerArr.splice(i,1),this.validateForm.value.answer&&this.validateForm.patchValue({answer:this.validateForm.value.answer.filter((function(e){return e!==t.value}))}),this.removeArr.push(e.id)}}},{key:"submitForm",value:function(){if(0==+this.validateForm.value.type&&this.validateForm.value.answer.length>1)this.nzMessageService.error("Single question cannot have multiple answer!");else{for(var e in this.isOkLoading=!0,this.validateForm.controls)this.validateForm.controls[e].markAsDirty(),this.validateForm.controls[e].updateValueAndValidity();console.log(this.validateForm.value),this.createQuestion()}}},{key:"createQuestion",value:function(){var e=this;this.addQuestion=this.getAddQuestion(),this.questionService.createQuestion(this.addQuestion).subscribe((function(n){console.log(n),0===n.code?(e.isVisible=!1,e.isOkLoading=!1,e.validateForm.reset(),e.getQuestionList(),e.nzMessageService.success("Add exam sheet success\uff01")):(e.isOkLoading=!1,e.nzMessageService.error("Add exam sheet failed\uff01"))}))}},{key:"getAddQuestion",value:function(){var e=this.validateForm.value;return{examId:this.examId,answer:e.answer,question0:e.question0,question1:e.question1,question2:e.question2,question3:e.question3,questionName:e.questionName,questionInfo:e.questionInfo,type:e.type,date:(new Date).getTime()}}},{key:"showInfo",value:function(e){this.nzModalService.info({nzTitle:"Exam sheet Description",nzContent:"<p>".concat(e,"</p>")})}},{key:"filyerType",value:function(e){this.searchType=e,console.log(this.searchType),this.getQuestionList(this.searchType)}},{key:"questionName",get:function(){return this.validateForm.get("questionName")}},{key:"questionInfo",get:function(){return this.validateForm.get("questionInfo")}}]),e}(),L.\u0275fac=function(e){return new(e||L)(u.Ub(r.d),u.Ub(r.a),u.Ub(f.a),u.Ub(b.a),u.Ub(d.e),u.Ub(s.c),u.Ub(l.a),u.Ub(m.c))},L.\u0275cmp=u.Ob({type:L,selectors:[["app-admin-question"]],features:[u.Cb([l.a])],decls:70,vars:43,consts:[[1,"bread"],["routerLink","/adminExam"],[4,"ngIf"],[1,"table-operations"],["nz-button","",3,"click"],["nzBordered","",3,"nzData","nzLoading","nzPageIndex","nzPageSize","nzPageIndexChange","nzPageSizeChange"],["basicTable",""],["nzShowFilter","",3,"nzFilters","nzFilterChange"],[4,"ngFor","ngForOf"],["nzTitle","Add Exam Sheet",3,"nzVisible","nzFooter","nzOkLoading","nzVisibleChange","nzOnCancel"],["nz-form","",3,"formGroup","ngSubmit"],["nzFor","questionName",3,"nzSm","nzXs"],[3,"nzSm","nzXs"],["nz-input","","formControlName","questionName","id","questionName","placeholder","no more than 100"],["nzRequired","true","nzFor","questionInfo",3,"nzSm","nzXs"],["formControlName","type","nzAllowClear","","nzPlaceHolder","Please select",2,"width","120px"],["nzValue","0","nzLabel","Sigle"],["nzValue","1","nzLabel","Multiple"],["nzFor","questionInfo",3,"nzSm","nzXs"],["formControlName","questionInfo","nz-input","","rows","4","placeholder","no more than 300"],[3,"nzXs","nzSm"],["nz-button","","nzType","dashed",1,"add-button",3,"disabled","click"],["nz-icon","","nzType","plus"],["nzMode","multiple","formControlName","answer","nzPlaceHolder","Please select",3,"nzMaxTagCount","nzMaxTagPlaceholder","nzAllowClear"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["tagPlaceHolder",""],["nz-button","","nzType","primary","nzBlock","true",3,"disabled"],[3,"click"],[3,"nzXs","nzSm","nzFor",4,"ngIf"],["nzErrorTip","Please input passenger's name or delete this field.",3,"nzXs","nzSm","nzOffset"],["nz-input","",1,"passenger-input",2,"width","60%","margin-right","8px","margin-left","10px",3,"placeholder","formControlName"],["nz-icon","","nzType","minus-circle-o",1,"dynamic-delete-button",3,"click"],[3,"nzXs","nzSm","nzFor"],[3,"nzLabel","nzValue"]],template:function(e,n){if(1&e&&(u.ac(0,"nz-breadcrumb",0),u.ac(1,"nz-breadcrumb-item"),u.ac(2,"a",1),u.Mc(3,"Exam Management"),u.Zb(),u.Zb(),u.Kc(4,M,2,1,"nz-breadcrumb-item",2),u.mc(5,"async"),u.Zb(),u.ac(6,"div",3),u.ac(7,"button",4),u.ic("click",(function(){return n.showModal()})),u.Mc(8,"New Exam Sheet"),u.Zb(),u.Zb(),u.ac(9,"nz-table",5,6),u.ic("nzPageIndexChange",(function(e){return n.pageService.pageIndex=e}))("nzPageSizeChange",(function(e){return n.pageService.pageSize=e})),u.ac(11,"thead"),u.ac(12,"tr"),u.ac(13,"th"),u.Mc(14,"Content"),u.Zb(),u.ac(15,"th"),u.Mc(16,"Description"),u.Zb(),u.ac(17,"th"),u.Mc(18,"Option A"),u.Zb(),u.ac(19,"th"),u.Mc(20,"Option B"),u.Zb(),u.ac(21,"th"),u.Mc(22,"Option C"),u.Zb(),u.ac(23,"th"),u.Mc(24,"Option D"),u.Zb(),u.ac(25,"th"),u.Mc(26,"Answer"),u.Zb(),u.ac(27,"th",7),u.ic("nzFilterChange",(function(e){return n.filyerType(e)})),u.Mc(28,"Type"),u.Zb(),u.ac(29,"th"),u.Mc(30,"Date"),u.Zb(),u.Zb(),u.Zb(),u.ac(31,"tbody"),u.Kc(32,Z,24,18,"tr",8),u.Zb(),u.Zb(),u.ac(33,"nz-modal",9),u.ic("nzVisibleChange",(function(e){return n.isVisible=e}))("nzOnCancel",(function(){return n.handleCancel()})),u.ac(34,"form",10),u.ic("ngSubmit",(function(){return n.submitForm()})),u.ac(35,"nz-form-item"),u.ac(36,"nz-form-label",11),u.Mc(37,"Content"),u.Zb(),u.ac(38,"nz-form-control",12),u.Vb(39,"input",13),u.Kc(40,F,3,2,"nz-form-explain",2),u.Zb(),u.Zb(),u.ac(41,"nz-form-item"),u.ac(42,"nz-form-label",14),u.Mc(43,"Type"),u.Zb(),u.ac(44,"nz-select",15),u.Vb(45,"nz-option",16),u.Vb(46,"nz-option",17),u.Zb(),u.Zb(),u.ac(47,"nz-form-item"),u.ac(48,"nz-form-label",18),u.Mc(49,"Description"),u.Zb(),u.ac(50,"nz-form-control",12),u.Vb(51,"textarea",19),u.Zb(),u.Zb(),u.Kc(52,x,6,8,"nz-form-item",8),u.ac(53,"nz-form-item"),u.ac(54,"nz-form-control",20),u.ac(55,"button",21),u.ic("click",(function(e){return n.addField(e)})),u.Vb(56,"i",22),u.Mc(57," Add Choose "),u.Zb(),u.Zb(),u.Zb(),u.ac(58,"nz-form-item"),u.ac(59,"nz-form-label",20),u.Mc(60,"Answer "),u.Zb(),u.ac(61,"nz-form-control",12),u.ac(62,"nz-select",23),u.Kc(63,I,1,2,"nz-option",24),u.Zb(),u.Kc(64,A,1,1,"ng-template",null,25,u.Lc),u.Zb(),u.Zb(),u.ac(66,"nz-form-item"),u.ac(67,"nz-form-control",20),u.ac(68,"button",26),u.Mc(69,"Submit"),u.Zb(),u.Zb(),u.Zb(),u.Zb(),u.Zb()),2&e){var t=u.Bc(10),i=u.Bc(65),o=null,a=(null==(o=n.validateForm.get("questionName"))?null:o.dirty)&&(null==(o=n.validateForm.get("questionName"))?null:o.errors)||(null==(o=n.validateForm.get("questionName"))?null:o.pending);u.Db(4),u.tc("ngIf",u.nc(5,37,n.exam$)),u.Db(5),u.tc("nzData",n.questionList)("nzLoading",n.tableLoading)("nzPageIndex",n.pageService.pageIndex)("nzPageSize",n.pageService.pageSize),u.Db(18),u.tc("nzFilters",n.listOftype),u.Db(5),u.tc("ngForOf",t.data),u.Db(1),u.tc("nzVisible",n.isVisible)("nzFooter",null)("nzOkLoading",n.isOkLoading),u.Db(1),u.tc("formGroup",n.validateForm),u.Db(2),u.tc("nzSm",4)("nzXs",24),u.Db(2),u.tc("nzSm",14)("nzXs",24),u.Db(2),u.tc("ngIf",a),u.Db(2),u.tc("nzSm",4)("nzXs",24),u.Db(6),u.tc("nzSm",4)("nzXs",24),u.Db(2),u.tc("nzSm",14)("nzXs",24),u.Db(2),u.tc("ngForOf",n.listOfControl),u.Db(2),u.tc("nzXs",u.vc(39,N))("nzSm",u.vc(40,X)),u.Db(1),u.tc("disabled",4===n.answerArr.length),u.Db(4),u.tc("nzXs",24)("nzSm",4),u.Db(2),u.tc("nzSm",14)("nzXs",24),u.Db(1),u.tc("nzMaxTagCount",4)("nzMaxTagPlaceholder",i)("nzAllowClear",!0),u.Db(1),u.tc("ngForOf",n.answerArr),u.Db(4),u.tc("nzXs",u.vc(41,T))("nzSm",u.vc(42,V)),u.Db(1),u.tc("disabled",!n.validateForm.valid)}},directives:[h.a,h.b,r.f,a.l,p.a,z.a,z.f,z.g,z.e,z.c,a.k,m.a,s.r,s.m,g.b,s.h,g.d,g.e,g.a,s.b,v.b,s.l,s.f,C.b,C.a,y.a,z.d,g.c],pipes:[a.b,w.a,O,k,w.b],styles:[".bread[_ngcontent-%COMP%]{margin-bottom:20px}.table-operations[_ngcontent-%COMP%]{margin-bottom:16px}.table-operations[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:8px}.dynamic-delete-button[_ngcontent-%COMP%]{cursor:pointer;position:relative;top:4px;font-size:24px;color:#999;transition:all .3s}.dynamic-delete-button[_ngcontent-%COMP%]:hover{color:#777}.passenger-input[_ngcontent-%COMP%]{width:60%;margin-right:8px}[nz-form][_ngcontent-%COMP%]{max-width:600px}.add-button[_ngcontent-%COMP%]{width:60%}"]}),L),canActivate:[t("UeAQ").a]}],E=((P=function e(){_classCallCheck(this,e)}).\u0275mod=u.Sb({type:P}),P.\u0275inj=u.Rb({factory:function(e){return new(e||P)},imports:[[r.g.forChild(_)],r.g]}),P),Q=t("Yonh"),K=t("0nng");t.d(n,"AdminQuestionModule",(function(){return U}));var B,U=((B=function e(){_classCallCheck(this,e)}).\u0275mod=u.Sb({type:B}),B.\u0275inj=u.Rb({factory:function(e){return new(e||B)},imports:[[a.c,E,Q.a,K.a,s.i,s.p]]}),B)}}]);