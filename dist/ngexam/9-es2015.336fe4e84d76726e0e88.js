(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"8XG9":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("LRne"),o=n("fXoL"),a=n("bB31");let r=(()=>{class e{constructor(e){this.messageService=e,this.createHandleError=(e="")=>(t="operation",n={})=>this.handleError(e,t,n)}handleError(e="",t="operation",n={}){return o=>{console.log(o);const a=o.error instanceof ErrorEvent?o.error.message:`Serve feedback${o.status},feedback information${o.error}`;return this.messageService.err(`${e}:${t}:Content:${a}`),Object(i.a)(n)}}}return e.\u0275fac=function(t){return new(t||e)(o.ec(a.a))},e.\u0275prov=o.Qb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},OqvA:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("fXoL");let o=(()=>{class e{constructor(){this.url="http://127.0.0.1:8081"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Qb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},bB31:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("tk/3"),o=n("fXoL"),a=n("OqvA");let r=(()=>{class e{constructor(e,t){this.http=e,this.config=t,this.token="pass",this.httpOptions={headers:new i.e({"Content-Type":"application/json","x-access-token":this.token})}}add(e){return this.http.post(`${this.config.url}/log/message`,e,this.httpOptions)}err(e){console.log(e)}getOneDataLog(e){return this.http.post(`${this.config.url}/log/getOneDataLog`,e,this.httpOptions)}}return e.\u0275fac=function(t){return new(t||e)(o.ec(i.b),o.ec(a.a))},e.\u0275prov=o.Qb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},qkzV:function(e,t,n){"use strict";n.r(t);var i=n("ofXK"),o=n("tyNb"),a=n("eIep"),r=n("3Pt+"),s=n("nPFy"),c=n("fXoL"),l=n("94Cw"),u=n("fFZa"),b=n("PScX"),m=n("dEAy"),d=n("yNE/"),f=n("OzZK"),h=n("rMZv"),p=n("ocnv"),z=n("PTRe"),g=n("zAKX"),v=n("FwiY"),C=n("FGh6");let O=(()=>{class e{transform(e,t){let n;return function(e){e[e.A=3]="A",e[e.B=5]="B",e[e.C=11]="C",e[e.D=21]="D"}(n||(n={})),e.map(e=>n[e]).join(",")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=c.Tb({name:"answerPipe",type:e,pure:!0}),e})(),w=(()=>{class e{transform(e,t){return["Single","Multiple"][e]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=c.Tb({name:"questionType",type:e,pure:!0}),e})();function M(e,t){if(1&e&&(c.ac(0,"nz-breadcrumb-item"),c.Mc(1),c.Zb()),2&e){const e=t.ngIf;c.Db(1),c.Oc(" ",e.examName," ")}}function Z(e,t){if(1&e){const e=c.bc();c.ac(0,"tr"),c.ac(1,"td"),c.Mc(2),c.Zb(),c.ac(3,"td"),c.ac(4,"a",27),c.ic("click",(function(){c.Cc(e);const n=t.$implicit;return c.lc().showInfo(n.questionInfo)})),c.Mc(5),c.mc(6,"formatLength"),c.Zb(),c.Zb(),c.ac(7,"td"),c.Mc(8),c.Zb(),c.ac(9,"td"),c.Mc(10),c.Zb(),c.ac(11,"td"),c.Mc(12),c.Zb(),c.ac(13,"td"),c.Mc(14),c.Zb(),c.ac(15,"td"),c.Mc(16),c.mc(17,"answerPipe"),c.Zb(),c.ac(18,"td"),c.Mc(19),c.mc(20,"questionType"),c.Zb(),c.ac(21,"td"),c.Mc(22),c.mc(23,"formatTime"),c.Zb(),c.Zb()}if(2&e){const e=t.$implicit;c.Db(2),c.Nc(e.questionName),c.Db(3),c.Nc(c.oc(6,9,e.questionInfo,5)),c.Db(3),c.Nc(e.question0),c.Db(2),c.Nc(e.question1),c.Db(2),c.Nc(e.question2),c.Db(2),c.Nc(e.question3),c.Db(2),c.Nc(c.nc(17,12,e.answer)),c.Db(3),c.Nc(c.nc(20,14,e.type)),c.Db(3),c.Nc(c.nc(23,16,e.date))}}function q(e,t){1&e&&(c.Yb(0),c.Mc(1," please input question Name! "),c.Xb())}function S(e,t){1&e&&(c.Yb(0),c.Mc(1," Question name format is incorrect "),c.Xb())}function F(e,t){if(1&e&&(c.ac(0,"nz-form-explain"),c.Kc(1,q,2,0,"ng-container",2),c.Kc(2,S,2,0,"ng-container",2),c.Zb()),2&e){const e=c.lc();var n=null;const t=null==(n=e.validateForm.get("questionName"))?null:n.hasError("required");var i=null;const o=null==(i=e.validateForm.get("password"))?null:i.hasError("lengthValid");c.Db(1),c.tc("ngIf",t),c.Db(1),c.tc("ngIf",o)}}function D(e,t){if(1&e&&(c.ac(0,"nz-form-label",32),c.Mc(1,"Choose "),c.Zb()),2&e){const e=c.lc().$implicit;c.tc("nzXs",24)("nzSm",4)("nzFor",e.controlInstance)}}function x(e,t){if(1&e){const e=c.bc();c.ac(0,"nz-form-item"),c.Kc(1,D,2,3,"nz-form-label",28),c.ac(2,"nz-form-control",29),c.Mc(3),c.Vb(4,"input",30),c.ac(5,"i",31),c.ic("click",(function(n){c.Cc(e);const i=t.$implicit,o=t.index,a=c.lc();return a.removeField(i,n,a.answerArr[o])})),c.Zb(),c.Zb(),c.Zb()}if(2&e){const e=t.$implicit,n=t.index,i=c.lc();c.Db(1),c.tc("ngIf",0==n),c.Db(1),c.tc("nzXs",24)("nzSm",20)("nzOffset",0==n?0:4),c.Db(1),c.Oc(" ",i.answerArr[n].label,""),c.Db(1),c.tc("placeholder","option-"+i.answerArr[n].label)("formControlName",e.controlInstance),c.Eb("id",e.id)}}function y(e,t){if(1&e&&c.Vb(0,"nz-option",33),2&e){const e=t.$implicit;c.tc("nzLabel",e.label)("nzValue",e.value)}}function I(e,t){if(1&e&&c.Mc(0),2&e){const e=c.lc();c.Oc(" and ",e.validateForm.value.answer.length," more selected ")}}const A=function(){return{span:24,offset:0}},L=function(){return{span:20,offset:4}},N=function(){return{span:14,offset:0}},k=function(){return{span:10,offset:4}},P=[{path:"",component:(()=>{class e{constructor(e,t,n,i,o,a,r,s){this.router=e,this.route=t,this.examService=n,this.questionService=i,this.nzMessageService=o,this.fb=a,this.pageService=r,this.nzModalService=s,this.isVisible=!1,this.isOkLoading=!1,this.listOftype=[{text:"single",value:0},{text:"multiple",value:1}],this.listOfControl=[],this.answerArr=[],this.answerArrInit=[{label:"A",value:3},{label:"B",value:5},{label:"C",value:11},{label:"D",value:21}],this.removeArr=[],this.questionList=[],this.tableLoading=!1}ngOnInit(){this.exam$=this.route.paramMap.pipe(Object(a.a)(e=>(this.examId=e.get("id"),this.getQuestionList(),this.examService.getOneExam(e.get("id"))))),this.validateForm=this.fb.group({questionName:[null,[r.q.required]],questionInfo:[null,[r.q.maxLength(300)]],answer:[null],type:[0]}),this.addField()}get questionName(){return this.validateForm.get("questionName")}get questionInfo(){return this.validateForm.get("questionInfo")}getQuestionList(e){this.tableLoading=!0,this.questionService.getQuestionList(this.examId,e,1).subscribe(e=>{this.tableLoading=!1,this.questionList=e.userInfo})}showModal(){this.isVisible=!0}handleOk(){this.isVisible=!1}handleCancel(){this.isVisible=!1}addField(e){let t,n;e&&e.preventDefault(),this.removeArr.length>0?(t=this.removeArr[0],this.removeArr.splice(0,1)):t=this.listOfControl.length>0?this.listOfControl[this.listOfControl.length-1].id+1:0,n={id:t,controlInstance:`question${t}`};const i=this.listOfControl.push(n);console.log(this.listOfControl[this.listOfControl.length-1]),this.validateForm.addControl(this.listOfControl[i-1].controlInstance,new r.d(null,r.q.required)),this.answerArr.push(this.answerArrInit[t])}removeField(e,t,n){if(t.preventDefault(),this.listOfControl.length>1){const t=this.listOfControl.indexOf(e);this.listOfControl.splice(t,1),console.log(this.listOfControl),this.validateForm.removeControl(e.controlInstance),this.answerArr.splice(t,1),this.validateForm.value.answer&&this.validateForm.patchValue({answer:this.validateForm.value.answer.filter(e=>e!==n.value)}),this.removeArr.push(e.id)}}submitForm(){if(0==+this.validateForm.value.type&&this.validateForm.value.answer.length>1)this.nzMessageService.error("Single question cannot have multiple answer!");else{this.isOkLoading=!0;for(const e in this.validateForm.controls)this.validateForm.controls[e].markAsDirty(),this.validateForm.controls[e].updateValueAndValidity();console.log(this.validateForm.value),this.createQuestion()}}createQuestion(){this.addQuestion=this.getAddQuestion(),this.questionService.createQuestion(this.addQuestion).subscribe(e=>{console.log(e),0===e.code?(this.isVisible=!1,this.isOkLoading=!1,this.validateForm.reset(),this.getQuestionList(),this.nzMessageService.success("Add exam sheet success\uff01")):(this.isOkLoading=!1,this.nzMessageService.error("Add exam sheet failed\uff01"))})}getAddQuestion(){const e=this.validateForm.value;return{examId:this.examId,answer:e.answer,question0:e.question0,question1:e.question1,question2:e.question2,question3:e.question3,questionName:e.questionName,questionInfo:e.questionInfo,type:e.type,date:(new Date).getTime()}}showInfo(e){this.nzModalService.info({nzTitle:"Exam sheet Description",nzContent:`<p>${e}</p>`})}filyerType(e){this.searchType=e,console.log(this.searchType),this.getQuestionList(this.searchType)}}return e.\u0275fac=function(t){return new(t||e)(c.Ub(o.d),c.Ub(o.a),c.Ub(l.a),c.Ub(u.a),c.Ub(b.e),c.Ub(r.c),c.Ub(s.a),c.Ub(m.c))},e.\u0275cmp=c.Ob({type:e,selectors:[["app-admin-question"]],features:[c.Cb([s.a])],decls:70,vars:43,consts:[[1,"bread"],["routerLink","/adminExam"],[4,"ngIf"],[1,"table-operations"],["nz-button","",3,"click"],["nzBordered","",3,"nzData","nzLoading","nzPageIndex","nzPageSize","nzPageIndexChange","nzPageSizeChange"],["basicTable",""],["nzShowFilter","",3,"nzFilters","nzFilterChange"],[4,"ngFor","ngForOf"],["nzTitle","Add Exam Sheet",3,"nzVisible","nzFooter","nzOkLoading","nzVisibleChange","nzOnCancel"],["nz-form","",3,"formGroup","ngSubmit"],["nzFor","questionName",3,"nzSm","nzXs"],[3,"nzSm","nzXs"],["nz-input","","formControlName","questionName","id","questionName","placeholder","no more than 100"],["nzRequired","true","nzFor","questionInfo",3,"nzSm","nzXs"],["formControlName","type","nzAllowClear","","nzPlaceHolder","Please select",2,"width","120px"],["nzValue","0","nzLabel","Sigle"],["nzValue","1","nzLabel","Multiple"],["nzFor","questionInfo",3,"nzSm","nzXs"],["formControlName","questionInfo","nz-input","","rows","4","placeholder","no more than 300"],[3,"nzXs","nzSm"],["nz-button","","nzType","dashed",1,"add-button",3,"disabled","click"],["nz-icon","","nzType","plus"],["nzMode","multiple","formControlName","answer","nzPlaceHolder","Please select",3,"nzMaxTagCount","nzMaxTagPlaceholder","nzAllowClear"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["tagPlaceHolder",""],["nz-button","","nzType","primary","nzBlock","true",3,"disabled"],[3,"click"],[3,"nzXs","nzSm","nzFor",4,"ngIf"],["nzErrorTip","Please input passenger's name or delete this field.",3,"nzXs","nzSm","nzOffset"],["nz-input","",1,"passenger-input",2,"width","60%","margin-right","8px","margin-left","10px",3,"placeholder","formControlName"],["nz-icon","","nzType","minus-circle-o",1,"dynamic-delete-button",3,"click"],[3,"nzXs","nzSm","nzFor"],[3,"nzLabel","nzValue"]],template:function(e,t){if(1&e&&(c.ac(0,"nz-breadcrumb",0),c.ac(1,"nz-breadcrumb-item"),c.ac(2,"a",1),c.Mc(3,"Exam Management"),c.Zb(),c.Zb(),c.Kc(4,M,2,1,"nz-breadcrumb-item",2),c.mc(5,"async"),c.Zb(),c.ac(6,"div",3),c.ac(7,"button",4),c.ic("click",(function(){return t.showModal()})),c.Mc(8,"New Exam Sheet"),c.Zb(),c.Zb(),c.ac(9,"nz-table",5,6),c.ic("nzPageIndexChange",(function(e){return t.pageService.pageIndex=e}))("nzPageSizeChange",(function(e){return t.pageService.pageSize=e})),c.ac(11,"thead"),c.ac(12,"tr"),c.ac(13,"th"),c.Mc(14,"Content"),c.Zb(),c.ac(15,"th"),c.Mc(16,"Description"),c.Zb(),c.ac(17,"th"),c.Mc(18,"Option A"),c.Zb(),c.ac(19,"th"),c.Mc(20,"Option B"),c.Zb(),c.ac(21,"th"),c.Mc(22,"Option C"),c.Zb(),c.ac(23,"th"),c.Mc(24,"Option D"),c.Zb(),c.ac(25,"th"),c.Mc(26,"Answer"),c.Zb(),c.ac(27,"th",7),c.ic("nzFilterChange",(function(e){return t.filyerType(e)})),c.Mc(28,"Type"),c.Zb(),c.ac(29,"th"),c.Mc(30,"Date"),c.Zb(),c.Zb(),c.Zb(),c.ac(31,"tbody"),c.Kc(32,Z,24,18,"tr",8),c.Zb(),c.Zb(),c.ac(33,"nz-modal",9),c.ic("nzVisibleChange",(function(e){return t.isVisible=e}))("nzOnCancel",(function(){return t.handleCancel()})),c.ac(34,"form",10),c.ic("ngSubmit",(function(){return t.submitForm()})),c.ac(35,"nz-form-item"),c.ac(36,"nz-form-label",11),c.Mc(37,"Content"),c.Zb(),c.ac(38,"nz-form-control",12),c.Vb(39,"input",13),c.Kc(40,F,3,2,"nz-form-explain",2),c.Zb(),c.Zb(),c.ac(41,"nz-form-item"),c.ac(42,"nz-form-label",14),c.Mc(43,"Type"),c.Zb(),c.ac(44,"nz-select",15),c.Vb(45,"nz-option",16),c.Vb(46,"nz-option",17),c.Zb(),c.Zb(),c.ac(47,"nz-form-item"),c.ac(48,"nz-form-label",18),c.Mc(49,"Description"),c.Zb(),c.ac(50,"nz-form-control",12),c.Vb(51,"textarea",19),c.Zb(),c.Zb(),c.Kc(52,x,6,8,"nz-form-item",8),c.ac(53,"nz-form-item"),c.ac(54,"nz-form-control",20),c.ac(55,"button",21),c.ic("click",(function(e){return t.addField(e)})),c.Vb(56,"i",22),c.Mc(57," Add Choose "),c.Zb(),c.Zb(),c.Zb(),c.ac(58,"nz-form-item"),c.ac(59,"nz-form-label",20),c.Mc(60,"Answer "),c.Zb(),c.ac(61,"nz-form-control",12),c.ac(62,"nz-select",23),c.Kc(63,y,1,2,"nz-option",24),c.Zb(),c.Kc(64,I,1,1,"ng-template",null,25,c.Lc),c.Zb(),c.Zb(),c.ac(66,"nz-form-item"),c.ac(67,"nz-form-control",20),c.ac(68,"button",26),c.Mc(69,"Submit"),c.Zb(),c.Zb(),c.Zb(),c.Zb(),c.Zb()),2&e){const e=c.Bc(10),i=c.Bc(65);var n=null;const o=(null==(n=t.validateForm.get("questionName"))?null:n.dirty)&&(null==(n=t.validateForm.get("questionName"))?null:n.errors)||(null==(n=t.validateForm.get("questionName"))?null:n.pending);c.Db(4),c.tc("ngIf",c.nc(5,37,t.exam$)),c.Db(5),c.tc("nzData",t.questionList)("nzLoading",t.tableLoading)("nzPageIndex",t.pageService.pageIndex)("nzPageSize",t.pageService.pageSize),c.Db(18),c.tc("nzFilters",t.listOftype),c.Db(5),c.tc("ngForOf",e.data),c.Db(1),c.tc("nzVisible",t.isVisible)("nzFooter",null)("nzOkLoading",t.isOkLoading),c.Db(1),c.tc("formGroup",t.validateForm),c.Db(2),c.tc("nzSm",4)("nzXs",24),c.Db(2),c.tc("nzSm",14)("nzXs",24),c.Db(2),c.tc("ngIf",o),c.Db(2),c.tc("nzSm",4)("nzXs",24),c.Db(6),c.tc("nzSm",4)("nzXs",24),c.Db(2),c.tc("nzSm",14)("nzXs",24),c.Db(2),c.tc("ngForOf",t.listOfControl),c.Db(2),c.tc("nzXs",c.vc(39,A))("nzSm",c.vc(40,L)),c.Db(1),c.tc("disabled",4===t.answerArr.length),c.Db(4),c.tc("nzXs",24)("nzSm",4),c.Db(2),c.tc("nzSm",14)("nzXs",24),c.Db(1),c.tc("nzMaxTagCount",4)("nzMaxTagPlaceholder",i)("nzAllowClear",!0),c.Db(1),c.tc("ngForOf",t.answerArr),c.Db(4),c.tc("nzXs",c.vc(41,N))("nzSm",c.vc(42,k)),c.Db(1),c.tc("disabled",!t.validateForm.valid)}},directives:[d.a,d.b,o.f,i.l,f.a,h.a,h.f,h.g,h.e,h.c,i.k,m.a,r.r,r.m,p.b,r.h,p.d,p.e,p.a,r.b,z.b,r.l,r.f,g.b,g.a,v.a,h.d,p.c],pipes:[i.b,C.a,O,w,C.b],styles:[".bread[_ngcontent-%COMP%]{margin-bottom:20px}.table-operations[_ngcontent-%COMP%]{margin-bottom:16px}.table-operations[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:8px}.dynamic-delete-button[_ngcontent-%COMP%]{cursor:pointer;position:relative;top:4px;font-size:24px;color:#999;transition:all .3s}.dynamic-delete-button[_ngcontent-%COMP%]:hover{color:#777}.passenger-input[_ngcontent-%COMP%]{width:60%;margin-right:8px}[nz-form][_ngcontent-%COMP%]{max-width:600px}.add-button[_ngcontent-%COMP%]{width:60%}"]}),e})(),canActivate:[n("UeAQ").a]}];let X=(()=>{class e{}return e.\u0275mod=c.Sb({type:e}),e.\u0275inj=c.Rb({factory:function(t){return new(t||e)},imports:[[o.g.forChild(P)],o.g]}),e})();var V=n("Yonh"),T=n("0nng");n.d(t,"AdminQuestionModule",(function(){return Q}));let Q=(()=>{class e{}return e.\u0275mod=c.Sb({type:e}),e.\u0275inj=c.Rb({factory:function(t){return new(t||e)},imports:[[i.c,X,V.a,T.a,r.i,r.p]]}),e})()}}]);